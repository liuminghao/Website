"use strict";angular.module("HelpersApp",["ngAnimate","ngCookies","ngResource","ngSanitize","ngTouch","ngStorage","uiRouterStyles","ui.router"]);var app=angular.module("HelpersApp");app.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/home"),a.state("home",{url:"/home",templateUrl:"../views/home.html"}).state("aboutUs",{url:"/aboutUs",templateUrl:"../views/aboutUs.html",data:{css:"../styles/test.css"}}).state("contactUs",{url:"/contactUs",templateUrl:"../views/contactUs.html"}).state("faq",{"abstract":!0,url:"/faq",templateUrl:"../views/faq.html",data:{css:"../styles/faq.css"}}).state("faq.everyone",{url:"/everyone",templateUrl:"../views/faq/everyone.html"}).state("faq.tutor",{url:"/tutor",templateUrl:"../views/faq/tutor.html"}).state("faq.student",{url:"/student",templateUrl:"../views/faq/student.html"}).state("preSignup",{url:"/preSignup",templateUrl:"../views/preSignup.html",controller:"preSignup"}).state("signup",{url:"/signup",templateUrl:"../views/signup.html"}).state("footers",{"abstract":!0,url:"/footers"}).state("safetyTips",{url:"/safetyTips",templateUrl:"../views/footers/safetyTips.html"}).state("academicIntegrity",{url:"/academicIntegrity",templateUrl:"../views/footers/academicIntegrity.html"}).state("termsOfUse",{url:"/termsOfUse",templateUrl:"../views/footers/termsOfUse.html"}).state("privacy",{url:"/privacy",templateUrl:"../views/footers/privacy.html"}).state("account",{"abstract":!0,url:"/account",templateUrl:"../views/account.html"}).state("account.genInfo",{url:"/genInfo",templateUrl:"../views/account/genInfo.html"}).state("account.cardInfo",{url:"/cardInfo",templateUrl:"../views/account/cardInfo.html"}).state("account.transactionHistory",{url:"/transactionHistory",templateUrl:"../views/account/transactionHistory.html"}).state("account.certifications",{url:"/certifications",templateUrl:"../views/account/certifications.html"})}]);var app=angular.module("HelpersApp");app.controller("loginCtrl",["$scope","$localStorage","$location","$state","loginService","range","match","after","updateInfo","getInfo",function(a,b,c,d,e,f,g,h,i,j){a.logUserIn=function(b){a.signedIn=!0,a.account=b,a.save(),c.path("account.genInfo")},a.failedLogin=function(){console.log("incorrect details")},a.loginAttempt=function(b){e.login(b,a)},a.logOut=function(){a.signedIn=!1,a.account=null,a.loginPopup=!1,a.save(),c.path("home")},a.updateInfo=function(){var b="ApiKey "+a.account.email+":"+a.account.apikey;i.update(a,b),console.log(a.account)},a.printInfo=function(){var b="ApiKey "+a.account.email+":"+a.account.apikey;j.print(a,b)},a.toggleLogin=function(){a.loginPopup=!a.loginPopup},a.showLogin=function(){return a.loginPopup&&!a.signedIn?!0:!1},a.save=function(){a.storage.account=a.account},a.load=function(){"undefined"==typeof a.storage.account||null===a.storage.account?(a.account=null,a.signedIn=!1):(a.account=a.storage.account,a.signedIn=!0)},a.checkPage=function(a){return g(a,h(".",d.current.name))?!0:!1},a.storage=b,a.load(),a.range=f,a.loginPopup=!1}]),app.factory("loginService",["$http",function(a){return{login:function(b,c){var d=a({method:"POST",url:"http://54.172.140.235/api/v1/user/login/",headers:{"Content-Type":"application/json"},data:JSON.stringify(b)});d.success(function(a){c.logUserIn(a)}).error(function(){c.failedLogin()})}}}]),app.factory("updateInfo",["$http",function(a){return{update:function(b,c){var d=a({method:"PUT",url:"http://54.172.140.235/api/v1/user/3/",headers:{"Content-Type":"application/json",AUTHORIZATION:c},data:b.account});d.success(function(){console.log("Updated information"),console.log("UPDATE THIS FUNCTION!")}).error(function(){console.log("YOU FAILED")})}}}]),app.factory("getInfo",["$http",function(a){return{print:function(b,c){var d=a({method:"GET",url:"http://54.172.140.235/api/v1/user/3/",headers:{"Content-Type":"application/json",AUTHORIZATION:c}});d.success(function(a){console.log(a)}).error(function(){console.log("FAILED INFO REQUEST")})}}}]),app.factory("forgotPassword",["$http",function(a){return{forgot:function(b){var c=a({method:"POST",url:"http://54.172.140.235/api/v1/user/password/reset/",headers:{"Content-Type":"application/json"},data:b.account.email});c.success(function(){console.log("Your password has been reset, check your email")}).error(function(){console.log("You entered a non existent email")})}}}]),app.factory("validation",["$http",function(a){return{validate:function(b,c){var d=a({method:"POST",url:"http://54.172.140.235/api/v1/user/digit/",headers:{"Content-Type":"application/json"},data:{email:b,digit:c}});d.success(function(){console.log("You have vertified your account")}).error(function(a){"The email already verified"===a.status?console.log("You have already been vertified"):"Digit expired"===a.status?console.log("Sorry this digit has expired, another email has been sent to your account"):"Invalid digit"===a.status?console.log("Sorry you entered an incorrect digit"):"Invalid digit format, the digit should be a 4 digit number"===a.status?console.log("Please enter a 4 digit number"):console.log("I m afraid I m not sure what went wrong")})}}}]);var app=angular.module("HelpersApp");app.controller("preSignup",["$scope","$location","$http","after",function(a,b,c,d){a.bcEmail=function(){"bc.edu"===d("@",a.newUser.email)?b.path("signup"):a.notAvailable=!0},a.submitPreForm=function(b){if(b){var d=c({url:"php/store-address.php",data:"ajax=true&email="+escape(a.newUser.email)});d.success(function(){console.log("SUCCESS")}).error(function(){console.log("FAILED")})}}}]);var app=angular.module("HelpersApp");app.controller("signupCtrl",["$scope","range","registerUser","after","match",function($scope,range,registerUser,after,match){$scope.passValidate=!0,$scope.emailValidate=!0,$scope.bcValidate=!0,$scope.signupSubmit=function(a){$scope.checkValid(a)?alert("hi"):alert("no")},$scope.checkValid=function(a){return $scope.checkPass()&&$scope.checkEmail()&&$scope.bcEmail()&&a},$scope.checkPass=function(){return $scope.passValidate=match($scope.confirmPassword,$scope.newUser.password),$scope.passValidate},$scope.checkEmail=function(){return $scope.emailValidate=match($scope.confirmEmail,$scope.newUser.email),$scope.emailValidate},$scope.bcEmail=function(){return $scope.bcValidate=eval("bc.edu"===after("@",$scope.newUser.email)),$scope.bcValidate},$scope.register=function(a,b){$scope.checkValid(b)&&registerUser.register($scope,a)},$scope.range=range}]),app.factory("registerUser",["$http",function(a){return{register:function(b,c){var d=a({method:"POST",url:"http://54.172.140.235/api/v1/createuser/",headers:{"Content-Type":"application/json"},data:JSON.stringify(c)});d.success(function(a){alert("Congratulations on signing up!")})}}}]);var app=angular.module("HelpersApp");app.controller("uploadCtrl",["$scope","fileReader",function(a,b){a.getFile=function(){b.readAsDataUrl(a.file,a).then(function(b){a.imageSrc=b})}}]),app.directive("ngFileSelect",function(){return{link:function(a,b){b.bind("change",function(b){a.file=(b.srcElement||b.target).files[0],a.getFile()})}}}),function(a){var b=function(a,b){var c=function(a,b,c){return function(){c.$apply(function(){b.resolve(a.result)})}},d=function(a,b,c){return function(){c.$apply(function(){b.reject(a.result)})}},e=function(a,b){return function(a){b.$broadcast("fileProgress",{total:a.total,loaded:a.loaded})}},f=function(a,b){var f=new FileReader;return f.onload=c(f,a,b),f.onerror=d(f,a,b),f.onprogress=e(f,b),f},g=function(b,c){var d=a.defer(),e=f(d,c);return e.readAsDataURL(b),d.promise};return{readAsDataUrl:g}};a.factory("fileReader",["$q","$log",b])}(angular.module("HelpersApp"));var app=angular.module("HelpersApp");app.directive("modal",function(){return{template:'<div class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">{{ title }}</h4></div><div class="modal-body" ng-transclude></div></div></div></div>',restrict:"E",transclude:!0,replace:!0,scope:!0,link:function(a,b,c){a.title=c.title,a.$watch(c.visible,function(a){1==a?$(b).modal("show"):$(b).modal("hide")}),$(b).on("shown.bs.modal",function(){a.$apply(function(){a.$parent[c.visible]=!0})}),$(b).on("hidden.bs.modal",function(){a.$apply(function(){a.$parent[c.visible]=!1})})}}});var app=angular.module("HelpersApp");app.factory("after",function(){return function(a,b){var c=b.substring(b.indexOf(a)+1);return c}}),app.factory("range",function(){return function(a,b){for(var c=[],d=b;d>=a;d--)c.push(d);return c}}),app.factory("match",function(){return function(a,b){return a===b?!0:!1}});var duScrollDefaultEasing=function(a){return.5>a?Math.pow(2*a,2)/2:1-Math.pow(2*(1-a),2)/2};angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",duScrollDefaultEasing).value("duScrollBottomSpy",!1),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset",function(a,b,c,d,e,f,g){var h={},i=function(a){return"undefined"!=typeof HTMLDocument&&a instanceof HTMLDocument||a.nodeType&&a.nodeType===a.DOCUMENT_NODE},j=function(a){return"undefined"!=typeof HTMLElement&&a instanceof HTMLElement||a.nodeType&&a.nodeType===a.ELEMENT_NODE},k=function(a){return j(a)||i(a)?a:a[0]};h.duScrollTo=function(b,c,d,e){var f;if(angular.isElement(b)?f=this.duScrollToElement:angular.isDefined(d)&&(f=this.duScrollToAnimated),f)return f.apply(this,arguments);var g=k(this);return i(g)?a.scrollTo(b,c):(g.scrollLeft=b,void(g.scrollTop=c))};var l,m;h.duScrollToAnimated=function(a,f,g,h){g&&!h&&(h=e);var i=this.duScrollLeft(),j=this.duScrollTop(),k=Math.round(a-i),n=Math.round(f-j),o=null,p=0,q=this,r="scroll mousedown mousewheel touchmove keydown",s=function(a){(!a||p&&a.which>0)&&(q.unbind(r,s),c(l),m.reject(),l=null)};if(l&&s(),m=b.defer(),0===g||!k&&!n)return 0===g&&q.duScrollTo(a,f),m.resolve(),m.promise;var t=function(a){null===o&&(o=a),p=a-o;var b=p>=g?1:h(p/g);q.scrollTo(i+Math.ceil(k*b),j+Math.ceil(n*b)),1>b?l=d(t):(q.unbind(r,s),l=null,m.resolve())};return q.duScrollTo(i,j),q.bind(r,s),l=d(t),m.promise},h.duScrollToElement=function(a,b,c,d){var e=k(this);(!angular.isNumber(b)||isNaN(b))&&(b=g);var f=this.duScrollTop()+k(a).getBoundingClientRect().top-b;return j(e)&&(f-=e.getBoundingClientRect().top),this.duScrollTo(0,f,c,d)},h.duScrollLeft=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(b,this.duScrollTop(),c,d);var e=k(this);return i(e)?a.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:e.scrollLeft},h.duScrollTop=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(this.duScrollLeft(),b,c,d);var e=k(this);return i(e)?a.scrollY||document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop},h.duScrollToElementAnimated=function(a,b,c,d){return this.duScrollToElement(a,b,c||f,d)},h.duScrollTopAnimated=function(a,b,c){return this.duScrollTop(a,b||f,c)},h.duScrollLeftAnimated=function(a,b,c){return this.duScrollLeft(a,b||f,c)},angular.forEach(h,function(a,b){angular.element.prototype[b]=a;var c=b.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[c])&&(angular.element.prototype[c]=a)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(a){var b=["webkit","moz","o","ms"];return function(c,d){if(a[c])return a[c];for(var e,f=c.substr(0,1).toUpperCase()+c.substr(1),g=0;g<b.length;g++)if(e=b[g]+f,a[e])return a[e];return d}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(a,b){var c=0,d=function(a,d){var e=(new Date).getTime(),f=Math.max(0,16-(e-c)),g=b(function(){a(e+f)},f);return c=e+f,g};return a("requestAnimationFrame",d)}]).factory("cancelAnimation",["polyfill","$timeout",function(a,b){var c=function(a){b.cancel(a)};return a("cancelAnimationFrame",c)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollBottomSpy",function(a,b,c,d,e,f,g,h){var i=function(e){var i=!1,j=!1,k=function(){j=!1;var b,g=e.container,i=g[0],k=0;"undefined"!=typeof HTMLElement&&i instanceof HTMLElement||i.nodeType&&i.nodeType===i.ELEMENT_NODE?(k=i.getBoundingClientRect().top,b=Math.round(i.scrollTop+i.clientHeight)>=i.scrollHeight):b=Math.round(c.pageYOffset+c.innerHeight)>=d[0].body.scrollHeight;var l,m,n,o,p,q,r=h&&b?"bottom":"top";for(o=e.spies,m=e.currentlyActive,n=void 0,l=0;l<o.length;l++)p=o[l],q=p.getTargetPosition(),q&&(h&&b||q.top+p.offset-k<20&&(f||-1*q.top+k)<q.height)&&(!n||n[r]<q[r])&&(n={spy:p},n[r]=q[r]);n&&(n=n.spy),m===n||f&&!n||(m&&(m.$element.removeClass("active"),a.$broadcast("duScrollspy:becameInactive",m.$element)),n&&(n.$element.addClass("active"),a.$broadcast("duScrollspy:becameActive",n.$element)),e.currentlyActive=n)};return g?function(){i?j=!0:(k(),i=b(function(){i=!1,j&&k()},g,!1))}:k},j={},k=function(a){var b=a.$id,c={spies:[]};return c.handler=i(c),j[b]=c,a.$on("$destroy",function(){l(a)}),b},l=function(a){var b=a.$id,c=j[b],d=c.container;d&&d.off("scroll",c.handler),delete j[b]},m=k(a),n=function(a){return j[a.$id]?j[a.$id]:a.$parent?n(a.$parent):j[m]},o=function(a){var b,c,d=a.$scope;if(d)return n(d);for(c in j)if(b=j[c],-1!==b.spies.indexOf(a))return b},p=function(a){for(;a.parentNode;)if(a=a.parentNode,a===document)return!0;return!1},q=function(a){var b=o(a);b&&(b.spies.push(a),b.container&&p(b.container)||(b.container&&b.container.off("scroll",b.handler),b.container=e.getContainer(a.$scope),b.container.on("scroll",b.handler).triggerHandler("scroll")))},r=function(a){var b=o(a);a===b.currentlyActive&&(b.currentlyActive=null);var c=b.spies.indexOf(a);-1!==c&&b.spies.splice(c,1),a.$element=null};return{addSpy:q,removeSpy:r,createContext:k,destroyContext:l,getContextForScope:n}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(a){var b={},c=function(a,c){var d=a.$id;return b[d]=c,d},d=function(a){return b[a.$id]?a.$id:a.$parent?d(a.$parent):void 0},e=function(c){var e=d(c);return e?b[e]:a},f=function(a){var c=d(a);c&&delete b[c]};return{getContainerId:d,getContainer:e,setContainer:c,removeContainer:f}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(a,b,c){return{link:function(d,e,f){e.on("click",function(e){if(f.href&&-1!==f.href.indexOf("#")||""!==f.duSmoothScroll){var g=f.href?f.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):f.duSmoothScroll,h=document.getElementById(g)||document.getElementsByName(g)[0];if(h&&h.getBoundingClientRect){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var i=f.offset?parseInt(f.offset,10):b,j=f.duration?parseInt(f.duration,10):a,k=c.getContainer(d);k.duScrollToElement(angular.element(h),isNaN(i)?0:i,isNaN(j)?0:j)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(a){return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){a.createContext(b)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(a){return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){d.$observe("duScrollContainer",function(d){angular.isString(d)&&(d=document.getElementById(d)),d=angular.isElement(d)?angular.element(d):c,a.setContainer(b,d),b.$on("$destroy",function(){a.removeContainer(b)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(a,b,c,d){var e=function(a,b,c,d){angular.isElement(a)?this.target=a:angular.isString(a)&&(this.targetId=a),this.$scope=b,this.$element=c,this.offset=d};return e.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},e.prototype.getTargetPosition=function(){var a=this.getTargetElement();return a?a.getBoundingClientRect():void 0},e.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(f,g,h){var i,j=h.ngHref||h.href;j&&-1!==j.indexOf("#")?i=j.replace(/.*(?=#[^\s]+$)/,"").substring(1):h.duScrollspy?i=h.duScrollspy:h.duSmoothScroll&&(i=h.duSmoothScroll),i&&c(function(){var c=new e(i,f,g,-(h.offset?parseInt(h.offset,10):b));a.addSpy(c),f.$on("$locationChangeSuccess",c.flushTargetCache.bind(c));var j=d.$on("$stateChangeSuccess",c.flushTargetCache.bind(c));f.$on("$destroy",function(){a.removeSpy(c),j()})},0,!1)}}}]);