"use strict";var app=angular.module("HelpersApp",["ngAnimate","ngCookies","ngResource","ngSanitize","ngTouch","ngStorage","ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/home"),a.state("home",{url:"/home",templateUrl:"../views/home.html"}).state("aboutUs",{url:"/aboutUs",templateUrl:"../views/aboutUs.html"}).state("contactUs",{url:"/contactUs",templateUrl:"../views/contactUs.html"}).state("faq",{url:"/faq",templateUrl:"../views/faq.html"}).state("preSignUp",{url:"/preSignUp",templateUrl:"../views/preSignUp.html"}).state("signUp",{url:"/signUp",templateUrl:"../views/signUp.html"}).state("safetyTips",{url:"/safetyTips",templateUrl:"../views/footers/safetyTips.html"}).state("account",{"abstract":!0,url:"/account",templateUrl:"../views/account.html"}).state("account.genInfo",{url:"/genInfo",templateUrl:"../views/account/genInfo.html"}).state("account.cardInfo",{url:"/cardInfo",templateUrl:"../views/account/cardInfo.html"}).state("account.transactionHistory",{url:"/transactionHistory",templateUrl:"../views/account/transactionHistory.html"}).state("account.certifications",{url:"/certifications",templateUrl:"../views/account/certifications.html"})}]);var app=angular.module("HelpersApp");app.controller("loginCtrl",["$scope","$localStorage","$location","$state","loginService","range","match","after","updateInfo","getInfo",function(a,b,c,d,e,f,g,h,i,j){a.logUserIn=function(b){a.signedIn=!0,a.account=b,a.save(),c.path("account")},a.failedLogin=function(){console.log("incorrect details")},a.loginAttempt=function(b){e.login(b,a)},a.logOut=function(){a.signedIn=!1,a.account=null,a.loginPopup=!1,a.save(),c.path("home")},a.updateInfo=function(){var b="ApiKey "+a.account.email+":"+a.account.apikey;i.update(a,b),console.log(a.account)},a.printInfo=function(){var b="ApiKey "+a.account.email+":"+a.account.apikey;j.print(a,b)},a.toggleLogin=function(){a.loginPopup=!a.loginPopup},a.showLogin=function(){return a.loginPopup&&!a.signedIn?!0:!1},a.save=function(){a.storage.account=a.account},a.load=function(){"undefined"==typeof a.storage.account||null===a.storage.account?(a.account=null,a.signedIn=!1):(a.account=a.storage.account,a.signedIn=!0)},a.checkPage=function(a){return g(a,h(".",d.current.name))?!0:!1},a.storage=b,a.load(),a.range=f,a.loginPopup=!1}]),app.factory("loginService",["$http",function(a){return{login:function(b,c){var d=a({method:"POST",url:"http://54.172.140.235/api/v1/user/login/",headers:{"Content-Type":"application/json"},data:JSON.stringify(b)});d.success(function(a){c.logUserIn(a)}).error(function(){c.failedLogin()})}}}]),app.factory("updateInfo",["$http",function(a){return{update:function(b,c){var d=a({method:"PUT",url:"http://54.172.140.235/api/v1/user/3/",headers:{"Content-Type":"application/json",AUTHORIZATION:c},data:b.account});d.success(function(){console.log("Updated information"),console.log("UPDATE THIS FUNCTION!")}).error(function(){console.log("YOU FAILED")})}}}]),app.factory("getInfo",["$http",function(a){return{print:function(b,c){var d=a({method:"GET",url:"http://54.172.140.235/api/v1/user/3/",headers:{"Content-Type":"application/json",AUTHORIZATION:c}});d.success(function(a){console.log(a)}).error(function(){console.log("FAILED INFO REQUEST")})}}}]),app.factory("forgotPassword",["$http",function(a){return{forgot:function(b){var c=a({method:"POST",url:"http://54.172.140.235/api/v1/user/password/reset/",headers:{"Content-Type":"application/json"},data:b.account.email});c.success(function(){console.log("Your password has been reset, check your email")}).error(function(){console.log("You entered a non existent email")})}}}]),app.factory("validation",["$http",function(a){return{validate:function(b,c){var d=a({method:"POST",url:"http://54.172.140.235/api/v1/user/digit/",headers:{"Content-Type":"application/json"},data:{email:b,digit:c}});d.success(function(){console.log("You have vertified your account")}).error(function(a){"The email already verified"===a.status?console.log("You have already been vertified"):"Digit expired"===a.status?console.log("Sorry this digit has expired, another email has been sent to your account"):"Invalid digit"===a.status?console.log("Sorry you entered an incorrect digit"):"Invalid digit format, the digit should be a 4 digit number"===a.status?console.log("Please enter a 4 digit number"):console.log("I m afraid I m not sure what went wrong")})}}}]);var app=angular.module("HelpersApp");app.controller("preSignup",["$scope","$location","$","after",function(a,b,c,d){a.bcEmail=function(){return"bc.edu"===d("@",a.newUser.email)?void b.path("signup"):void(this.failedVisibility={visibility:"visible"})},a.submitPreForm=function(b){c.ajax({url:"../../php/store-address.php",data:"ajax=true&email="+a.newUser.email,success:function(a){c("#response").html(a)}}),b&&console.log("HI")}}]);var app=angular.module("HelpersApp");app.controller("uploadCtrl",["$scope","fileReader",function(a,b){a.getFile=function(){b.readAsDataUrl(a.file,a).then(function(b){a.imageSrc=b})}}]),app.directive("ngFileSelect",function(){return{link:function(a,b){b.bind("change",function(b){a.file=(b.srcElement||b.target).files[0],a.getFile()})}}}),function(a){var b=function(a,b){var c=function(a,b,c){return function(){c.$apply(function(){b.resolve(a.result)})}},d=function(a,b,c){return function(){c.$apply(function(){b.reject(a.result)})}},e=function(a,b){return function(a){b.$broadcast("fileProgress",{total:a.total,loaded:a.loaded})}},f=function(a,b){var f=new FileReader;return f.onload=c(f,a,b),f.onerror=d(f,a,b),f.onprogress=e(f,b),f},g=function(b,c){var d=a.defer(),e=f(d,c);return e.readAsDataURL(b),d.promise};return{readAsDataUrl:g}};a.factory("fileReader",["$q","$log",b])}(angular.module("HelpersApp"));var app=angular.module("HelpersApp");app.directive("modal",function(){return{template:'<div class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">{{ title }}</h4></div><div class="modal-body" ng-transclude></div></div></div></div>',restrict:"E",transclude:!0,replace:!0,scope:!0,link:function(a,b,c){a.title=c.title,a.$watch(c.visible,function(a){1==a?$(b).modal("show"):$(b).modal("hide")}),$(b).on("shown.bs.modal",function(){a.$apply(function(){a.$parent[c.visible]=!0})}),$(b).on("hidden.bs.modal",function(){a.$apply(function(){a.$parent[c.visible]=!1})})}}});var app=angular.module("HelpersApp");app.factory("after",function(){return function(a,b){var c=b.substring(b.indexOf(a)+1);return c}}),app.factory("range",function(){return function(a,b){for(var c=[],d=b;d>=a;d--)c.push(d);return c}}),app.factory("match",function(){return function(a,b){return a===b?!0:!1}});